<!DOCTYPE html>
<html>
<head>
    <title>My Page</title>
    <meta name="viewport" content="width=device-width, minimum-scale=1, maximum-scale=1">

    <!--script src="jquery-mobile/docs/pages/Backbone-Require/js/libs/require.js"></script>
    <script src="http://code.jquery.com/jquery-1.8.3.js"></script>

    <link rel="stylesheet" href="http://code.jquery.com/ui/1.9.2/themes/base/jquery-ui.css" />
    <script src="http://code.jquery.com/ui/1.9.2/jquery-ui.js"></script>

    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
    <script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script-->

    <!--script src="jquery-mobile/docs/pages/Backbone-Require/js/libs/require.js"></script>
    <script src="jquery-mobile/docs/pages/Backbone-Require/js/libs/lodash.js"></script>
    <script src="jquery-mobile/docs/pages/Backbone-Require/js/libs/backbone.js"></script-->
    <script src="jquery-mobile/docs/pages/Backbone-Require/js/libs/jquery.js"></script>

    <script src="jquery.layout-latest.js"></script>
    <link rel="stylesheet" href="layout-default-latest.css" />

    <script src="jquery-mobile/docs/pages/Backbone-Require/js/libs/jquerymobile.js"></script>
    <link rel="stylesheet" href="jquery-mobile/css/themes/default/jquery.mobile-1.2.0.css" />
    <!--
    <link rel="stylesheet" href="jquery-mobile/css/themes/default/jquery.mobile.theme.css" />
    <link rel="stylesheet" href="jquery-mobile/css/themes/default/jquery.mobile.css" />
    <link rel="stylesheet" href="jquery-mobile/css/structure/jquery.mobile.core.css" />
    <link rel="stylesheet" href="jquery-mobile/css/structure/jquery.mobile.button.css" />
    <link rel="stylesheet" href="jquery-mobile/css/structure/jquery.mobile.controlgroup.css" />
    <link rel="stylesheet" href="jquery-mobile/css/structure/jquery.mobile.navbar.css" />
    <link rel="stylesheet" href="jquery-mobile/css/structure/jquery.mobile.collapsible.css" />
    -->

    <script src="jquerymobile-splitview/src/jquery.mobile.splitview.js"></script>

    <script src="OpenLayers.js" type="text/javascript"></script>
    <script src="mapquery/src/jquery.mapquery.core.js" type="text/javascript"></script>

<!--
TODO
- grids
- tost
- small screen interface
- button menu (small screen)
-->
    <style>
        div.ui-mobile-viewport > div {
            min-height: 50px !important;
            height: 100%;
        }
        .ui-layout-pane {
            padding: 0;
        }
        .ui-layout-north {
            border: none;
        }
        .ui-layout-west {
            border-top: none;
            border-bottom: none;
            border-left: none;
        }
        .ui-layout-center {
            border-bottom: none;
        }
        .ui-layout-east {
            border-bottom: none;
            border-right: none;
        }
        .ui-layout-east > * {
            display: inline-block;
            width: 100%;
            height: 100%;
        }
        #nav {
            position: absolute;
            bottom: .3em;
            right: .3em;
        }
        #nav > div {
            margin: 0;
        }
        #map2-page .ui-content {
            padding: 0;
            height: 100%;
        }
        #map, #map2 {
            width: 100%;
            height: 100%;
        }
    </style>
</head>
<body>
    <div class="ui-layout-north">
        <div style="height: 80px;"></div>
        <div id="nav"></div>
    </div>

    <div class="ui-layout-center">
        <div id="map"></div>
    </div>

    <div class="ui-layout-west">
    <div data-role="panel" data-hash="crumbs" data-context="a#default">
      <div data-role="page" id="main" data-hash="false">

          <div data-role="header">
              <h1>Main</h1>
          </div>

          <div data-role="content">
              <ul data-role="listview">
            <li>About
              <ul>
                <li><a href="#aboutus" data-panel="menu">About Us</a></li>
                <li><a href="#aboutsv" data-panel="menu">About Splitview</a></li>
              </ul>
            </li>
          </ul>
          </div><!-- /content -->
      </div><!-- /page -->

      <div data-role="page" id="aboutus">
        <div data-role="header">
        <h1>About us !</h1>
        </div>
        <div data-role="content">
        About us ...
        </div>
      </div><!-- /page -->
      <div data-role="page" id="aboutsv">
        <div data-role="header">
        <h1>About SV !</h1>
        </div>
        <div data-role="content">
        About SV ...
        </div>
      </div><!-- /page -->
      <div data-role="page" id="map2-page">
        <div data-role="header">
        <h1>Map</h1>
        </div>
        <div data-role="content">
            <div id="map2"></div>
        </div>
      </div><!-- /page -->
    </div><!-- panel -->
    </div>
    <div class="ui-layout-east">
        <div id="one"><p>One</p><p>One</p></div>
        <div id="two" style="display: none;"><p>Two</p><p>Two</p></div>
    </div>


<script>
/*require.config({
    paths: {
        'jquery': 'http://code.jquery.com/jquery-1.8.3.js',
        'jquery.mobile': 'jquery-mobile/js/',
        "underscore": "libs/lodash",
        "backbone": "libs/backbone"
    },

    // Sets the configuration for your third party scripts that are not AMD compatible
    shim: {
        "backbone": {
            "deps": [ "underscore", "jquery" ],
            "exports": "Backbone"  //attaches "Backbone" to the window object
        }
    }
});


require([
  'jquery',
  'jquery.mobile'
], function($) {*/

$(function() {
    $.extend(  $.mobile , {
        defaultPageTransition: "none"
    });

    var nav = $('<div></div>');

    $('<button>About us</button>')
    .appendTo(nav)
    .button({
    })
    .on('click', function() {
        $.mobile.changePage("#aboutus");
    });

    $('<button>About SV</button>')
    .appendTo(nav)
    .button({
    })
    .on('click', function() {
        $.mobile.changePage('#aboutsv');
    });

    $('<button>Main</button>')
    .appendTo(nav)
    .button({
    })
    .on('click', function() {
        $.mobile.changePage("#main");
    });

    $('<button>Map</button>')
    .appendTo(nav)
    .button({
    })
    .on('click', function() {
        $.mobile.changePage("#map2-page");
        $('#map2').mapQuery({
            layers: [{
                type: 'osm'
            }]
        });
    });

    $('<button>Tost</button>')
    .appendTo(nav)
    .button({
    })
    .on('click', function() {
        // TODO
    });

    $('<button>Perm tost</button>')
    .appendTo(nav)
    .button({
    })
    .on('click', function() {
        // TODO
    });

    $('<button>One</button>')
    .appendTo(nav)
    .button({
    })
    .on('click', function() {
        layout.show('east');
        $('.ui-layout-east > *').each(function (index, elem) {
            elem.style.display = 'none';
        });
        $('.ui-layout-east #one')[0].style.display = 'inline-block';
    });

    $('<button>Two</button>')
    .appendTo(nav)
    .button({
    })
    .on('click', function() {
        layout.show('east');
        $('.ui-layout-east > *').each(function (index, elem) {
            elem.style.display = 'none';
        });
        $('.ui-layout-east #two')[0].style.display = 'inline-block';
    });

    nav.appendTo($('#nav'))
    .controlgroup({
        direction: 'horizontal',
        mini: true
    });

    $('#map').mapQuery({
        layers: [{
            type: 'osm'
        }]
    });

    layout = $('body').layout({
        'defaults': {
            resizable: true,
            spacing_open: 4,
            spacing_closed: 4
        },
        west: {
            size: 300,
            minSize: 200,
            maxSize: 500
        },
        east: {
            initHidden: true
        },
        north: {
            resizable: false,
            closable: false,
            spacing_open: 0
        }
    });
});
</script>
</body>
</html>
